<?php
	class Login{
		function encrypt($password){
			return sha1($password);
		}

		function register($username, $password, $role){
			$encPass = $this->encrypt($password);
			
			include 'conn.php';
	
			$query = sprintf("INSERT INTO Application(password, role, Users_email, passwordSalt) 
							  VALUES('%s','%s','%s','pslt')", $encPass, $role, $username);

			if(!mysqli_query($con,$query)){
				echo  "Register: ". mysqli_error($con);
			}
		}

		function logon($username, $password){
			include 'conn.php';

			$query = sprintf("SELECT * 
					  		  FROM Application
					  		  WHERE Users_email = '%s'",$username);			

			$result = mysqli_query($con,$query);
			
			if(!$result){
				die( "Logon: " . mysqli_error($con));
			}
			$row = mysqli_fetch_object($result);

			print_r($row);
		}
	}
	
	$login = new Login();

	$login->register("noa@fds.sdf","123456","user");

	$login->logon("noa@fds.sdf","123456");
?>
